-- Underlib/Main.lua

local Underlib = {}
Underlib.__index = Underlib

-- Initialize the library
function Underlib:MakeWindow(options)
    local self = setmetatable({}, Underlib)
    
    -- Create main ScreenGui
    self.Gui = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
    
    -- Create main Frame
    self.MainFrame = Instance.new("Frame", self.Gui)
    self.MainFrame.Size = UDim2.new(0, 400, 0, 600)
    self.MainFrame.Position = UDim2.new(0.5, -200, 0.5, -300)
    self.MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    
    -- Add title
    local Title = Instance.new("TextLabel", self.MainFrame)
    Title.Size = UDim2.new(1, 0, 0, 50)
    Title.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Text = options.Name or "Title"
    Title.Font = Enum.Font.SourceSans
    Title.TextSize = 24
    
    -- Save configuration options
    self.HidePremium = options.HidePremium or false
    self.SaveConfig = options.SaveConfig or true
    self.ConfigFolder = options.ConfigFolder or "UnderlibConfig"
    
    print("Window Created with Title:", options.Name)
    
    return self
end

function Underlib:CreateTab(name)
    local Tab = Instance.new("Frame", self.MainFrame)
    Tab.Name = name
    Tab.Size = UDim2.new(1, 0, 0, 50)
    Tab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

    local TabButton = Instance.new("TextButton", Tab)
    TabButton.Size = UDim2.new(1, 0, 1, 0)
    TabButton.Text = name
    TabButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)

    return Tab
end

function Underlib:CreateSection(tab, name)
    local Section = Instance.new("Frame", tab)
    Section.Name = name
    Section.Size = UDim2.new(1, 0, 0, 100)
    Section.Position = UDim2.new(0, 0, 0, 50)
    Section.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    
    local SectionLabel = Instance.new("TextLabel", Section)
    SectionLabel.Size = UDim2.new(1, 0, 0, 25)
    SectionLabel.Text = name
    SectionLabel.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    SectionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)

    return Section
end

function Underlib:CreateButton(section, text, callback)
    local Button = Instance.new("TextButton", section)
    Button.Size = UDim2.new(1, 0, 0, 50)
    Button.Position = UDim2.new(0, 0, 0, 25)
    Button.Text = text
    Button.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.MouseButton1Click:Connect(callback)
end

return Underlib
